define(["../avalon.getModel","text!./avalon.rating.html","css!../chameleon/oniui-common.css"],function(e,t){var n=t,r=function(t,n){var r=e.getModel(t,n);return r&&r[1][r[0]]||e.noop},i=function(e){var t=e.tagName.toUpperCase();return t==="INPUT"||t==="SELECT"},s=e.ui.rating=function(t,s,o){var u=s.ratingOptions,a=r("onSelect",o),f=r("onFloat",o),l,c=e.define(s.ratingId,function(r){e.mix(r,u),r.value=r.floatValue=t.value,r.list=new Array(u.max),r.mouseover=function(e){c.floatValue=e+1},r.select=function(e){c.value=e+1},r.mouseout=function(){c.floatValue=c.value},r.setByIp=function(){var e=parseInt(t.value);e!==c.value&&(c.value=c.floatValue=e?e:0)},r.set=function(e){c.value=e,c.floatValue=e},r.$init=function(){l=e.parseHTML(n).firstChild;if(i(t)){var r=t.parentNode;r.insertBefore(l,t),r.insertBefore(t,l),t.setAttribute("data-duplex-changed","setByIp"),c.$watch("value",function(e){t.value=e})}else c.value=c.floatValue=c.defaultValue,t.appendChild(l);e.scan(l.parentNode,[c].concat(o))},r.$remove=function(){l.parentNode.removeChild(l),l=null},r.$watch("value",function(n){a.call(null,n,s.ratingId,e(t).data())}),r.$watch("floatValue",function(n){f.call(null,n,s.ratingId,e(t).data())})});return c};return s.defaults={defaultValue:3,max:5,margin:3,notSelectedColor:"#CECECE",notSelectedContent:"&#xf006;",selectedColor:"#00A3C2",selectedContent:"&#xf005;",size:20},e});